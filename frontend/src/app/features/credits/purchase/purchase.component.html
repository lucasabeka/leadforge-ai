<div class="purchase-container">
  <div class="purchase-card">
    <button routerLink="/dashboard" class="back-btn">â† Retour au dashboard</button>

    <h1>Acheter des crÃ©dits</h1>
    <p class="subtitle">1 crÃ©dit = 1 prospect qualifiÃ© avec email personnalisÃ©</p>

    <div class="current-balance">
      <span class="balance-label">Solde actuel</span>
      <span class="balance-amount">{{ currentCredits }} crÃ©dits</span>
    </div>


    <div *ngIf="errorMessage" class="error-message">
      âŒ {{ errorMessage }}
    </div>

    <div class="packages-grid">
      <div *ngFor="let package of packages"
           class="package-card"
           [class.popular]="package.popular">
        <div *ngIf="package.popular" class="popular-badge">
          â­ Le plus populaire
        </div>
        <div *ngIf="package.savings" class="savings-badge">
          Ã‰conomisez {{ package.savings }}
        </div>

        <h3>{{ package.credits }} crÃ©dits</h3>
        <div class="price">
          <span class="amount">{{ package.price }}â‚¬</span>
          <span class="per-credit">{{ (package.price / package.credits).toFixed(2) }}â‚¬ / crÃ©dit</span>
        </div>

        <ul class="features">
          <li>âœ“ {{ package.credits }} prospects qualifiÃ©s</li>
          <li>âœ“ Emails personnalisÃ©s par IA</li>
          <li>âœ“ Export CSV illimitÃ©</li>
          <li>âœ“ CrÃ©dits valables 1 an</li>
        </ul>

        <button
          (click)="purchasePackage(package.credits, package.price)"
          [disabled]="loading"
          class="btn-purchase"
          [class.popular]="package.popular">
          {{ loading ? 'Traitement...' : 'Acheter maintenant' }}
        </button>
      </div>
    </div>

    <div class="payment-info">
      <p>ğŸ’³ Paiement sÃ©curisÃ© (Stripe intÃ©gration Ã  venir)</p>
      <p>ğŸ”’ Vos donnÃ©es sont protÃ©gÃ©es</p>
      <p>â†©ï¸ Satisfait ou remboursÃ© sous 7 jours</p>
    </div>
  </div>
</div>
